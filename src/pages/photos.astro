---
import { SITE } from "@config";
import Layout from "@layouts/Layout.astro";
import Main from "@layouts/Main.astro";
import Header from "@components/Header.astro";
import Footer from "@components/Footer.astro";
import GalleryComponent from "@components/GalleryComponent";

// 读取 public/imgs/ 文件夹下的图片
const images = import.meta.glob("/public/imgs/*.{jpg,jpeg,png,gif}", { eager: true });

// 提取图片路径和添加标题和简介
const imagePaths = Object.values(images).map((image) => {
  const src = image.default;
  const title = `Image ${image.default.split('/').pop().split('.')[0]}`; // 提取文件名作为标题
  const description = `Description for ${title}`; // 添加一个简单的描述
  return { src, title, description };
});
---

<Layout title={`Gallery | ${SITE.title}`}>
  <Header activeNav="gallery" />
  <Main pageTitle="Gallery" pageDesc="Browse our photo gallery ...">
    <GalleryComponent images={imagePaths} />
  </Main>
  <Footer />
</Layout>

<style>
  .my-masonry-grid {
    display: flex;
    margin-left: -20px; /* gutter size offset */
    width: auto;
  }
  .my-masonry-grid_column {
    padding-left: 20px; /* gutter size */
    background-clip: padding-box;
  }
  .my-masonry-grid_column > div { /* change div to reference your elements you put in <Masonry> */
    margin-bottom: 20px;
    position: relative;
  }
</style>
